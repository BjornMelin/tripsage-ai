# TripSage Operators Reference (frontend-only)

All runtime is Next.js 16 with AI SDK v6 route handlers.

## Prerequisites

- Node.js 24+, pnpm 9+
- Supabase project (URL, public key, service role key, JWT secret)
- Upstash Redis + QStash
- Model provider keys or Vercel AI Gateway

## Environment Variables

Use the canonical sources instead of duplicating lists:

- [Environment Setup](../development/core/env-setup.md#environment-setup-guide-local-development) (local dev and provider keys)
- [Deployment Guide: Required Environment Variables](deployment-guide.md#required-environment-variables)

## Start and Verify

```bash
cp .env.local.example .env.local
pnpm install
pnpm dev
```

Quality gate: `pnpm biome:check && pnpm type-check && pnpm test`

## Operations CLI

The `pnpm ops` command provides infrastructure and configuration checks:

```bash
# Infrastructure checks
pnpm ops infra check supabase   # Auth health + storage (with service role key)
pnpm ops infra check upstash    # Redis ping + QStash topics probe

# AI configuration
pnpm ops ai check config        # Gateway/BYOK credential presence + reachability

# Combined
pnpm ops check all              # Run all checks with summary
```

### Test Analysis

```bash
pnpm ops test analyze failures  # Categorize failures from vitest JSON
pnpm ops test analyze all       # Failures + performance summary
```

Shorthand: `pnpm test:analyze`, `pnpm test:analyze:all`

Reads `.vitest-reports/vitest-report.json` (generated by `pnpm test:benchmark`).

## CI Integration

The deploy workflow runs `pnpm ops check all` as a non-blocking validation step
when Supabase/Upstash credentials are configured. See
`.github/workflows/deploy.yml`.

## Notes

- Rate limiting requires Upstash credentials; routes operate without limits
  if not configured.
- QStash signing keys are mandatory for webhook verification in production.
